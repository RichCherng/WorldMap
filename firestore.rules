rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {

    // Chinese flashcards collection
    // MVP: Open access for development/testing
    // TODO: Add authentication requirements for production
    match /chinese_flash_cards/{cardId} {
      allow read: if true;   // Anyone can read flashcards
      allow write: if true;  // Anyone can create/update/delete (for MVP)
    }

    // French flashcards collection
    // MVP: Open access for development/testing
    // TODO: Add authentication requirements for production
    match /french_flash_cards/{cardId} {
      allow read: if true;   // Anyone can read flashcards
      allow write: if true;  // Anyone can create/update/delete (for MVP)
    }
  }
}

// FUTURE: More secure rules with authentication
// Uncomment and modify when adding Firebase Auth:
//
// rules_version = '2';
// service cloud.firestore {
//   match /databases/{database}/documents {
//
//     // Helper functions
//     function isSignedIn() {
//       return request.auth != null;
//     }
//
//     function isValidChineseFlashcard() {
//       return request.resource.data.keys().hasAll(['chineseWord', 'englishWord', 'pinyin'])
//         && request.resource.data.chineseWord is string
//         && request.resource.data.englishWord is string
//         && request.resource.data.pinyin is string;
//     }
//
//     // Chinese flashcards
//     match /chinese_flashcards/{cardId} {
//       allow read: if true;  // Public read
//       allow create: if isSignedIn() && isValidChineseFlashcard();
//       allow update: if isSignedIn() && isValidChineseFlashcard();
//       allow delete: if isSignedIn();
//     }
//
//     // French flashcards
//     match /french_flashcards/{cardId} {
//       allow read: if true;  // Public read
//       allow create: if isSignedIn();
//       allow update: if isSignedIn();
//       allow delete: if isSignedIn();
//     }
//   }
// }
